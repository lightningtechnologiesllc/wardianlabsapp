# Use 2+ replicas for zero-downtime deployments
replicaCount: 2

images:
  php:
    repository: wardianapp-php
#     tag: latest
    pullPolicy: IfNotPresent
  nginx:
    repository: wardianapp-nginx
#     tag: latest
    pullPolicy: IfNotPresent

app:
  env: prod
  debug: "0"

secrets:
  # Set via --set or separate values file
  symfonyDecryptionSecret: ""

nginx:
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "200m"

php:
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"

worker:
  timeLimit: "3600"
  memoryLimit: "512M"
  resources:
    requests:
      memory: "256Mi"
      cpu: "50m"
    limits:
      memory: "512Mi"
      cpu: "200m"

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: true
  className: traefik
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
  hosts:
    - app.wardianlabs.com
    - "*.app.wardianlabs.com"
  tls:
    enabled: true
    secretName: wardianapp-tls

certManager:
  enabled: true
  email: vicent@techabreath.com
  server: https://acme-v02.api.letsencrypt.org/directory
